/*! Swig v1.0.0-rc2 | https://paularmstrong.github.com/swig | @license https://github.com/paularmstrong/swig/blob/master/LICENSE */
/*! DateZ (c) 2011 Tomo Universalis | @license https://github.com/TomoUniversalis/DateZ/blob/master/LISENCE */
!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e){var t=e("../lib/swig");"function"==typeof window.define&&"object"==typeof window.define.amd?window.define("swig",[],function(){return t}):window.swig=t},{"../lib/swig":6}],2:[function(e,t,n){var r=e("./utils"),o={full:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],alt:{"-1":"Yesterday",0:"Today",1:"Tomorrow"}};n.tzOffset=0,n.DateZ=function(){var e={"default":["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toGMTString","toUTCString","valueOf","getTime"],z:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear","toDateString","toLocaleDateString","toLocaleTimeString"]},t=this;t.date=t.dateZ=arguments.length>1?new Date(Date.UTC.apply(Date,arguments)+6e4*(new Date).getTimezoneOffset()):1===arguments.length?new Date(new Date(arguments["0"])):new Date,t.timezoneOffset=t.dateZ.getTimezoneOffset(),r.each(e.z,function(e){t[e]=function(){return t.dateZ[e]()}}),r.each(e["default"],function(e){t[e]=function(){return t.date[e]()}}),this.setTimezoneOffset(n.tzOffset)},n.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(e){return this.timezoneOffset=e,this.dateZ=new Date(this.date.getTime()+6e4*this.date.getTimezoneOffset()-6e4*this.timezoneOffset),this}},n.d=function(e){return(e.getDate()<10?"0":"")+e.getDate()},n.D=function(e){return i.abbr[e.getDay()]},n.j=function(e){return e.getDate()},n.l=function(e){return i.full[e.getDay()]},n.N=function(e){var t=e.getDay();return t>=1?t+1:7},n.S=function(e){var t=e.getDate();return 1===t%10&&11!==t?"st":2===t%10&&12!==t?"nd":3===t%10&&13!==t?"rd":"th"},n.w=function(e){return e.getDay()},n.z=function(e,t,r){var o=e.getFullYear(),i=new n.DateZ(o,e.getMonth(),e.getDate(),12,0,0),s=new n.DateZ(o,0,1,12,0,0);return i.setTimezoneOffset(t,r),s.setTimezoneOffset(t,r),Math.round((i-s)/864e5)},n.W=function(e){var t,n=new Date(e.valueOf()),r=(e.getDay()+6)%7;return n.setDate(n.getDate()-r+3),t=n.valueOf(),n.setMonth(0,1),4!==n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),1+Math.ceil((t-n)/6048e5)},n.F=function(e){return o.full[e.getMonth()]},n.m=function(e){return(e.getMonth()<9?"0":"")+(e.getMonth()+1)},n.M=function(e){return o.abbr[e.getMonth()]},n.n=function(e){return e.getMonth()+1},n.t=function(e){return 32-new Date(e.getFullYear(),e.getMonth(),32).getDate()},n.L=function(e){return 29===new Date(e.getFullYear(),1,29).getDate()},n.o=function(e){var t=new Date(e.valueOf());return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},n.Y=function(e){return e.getFullYear()},n.y=function(e){return e.getFullYear().toString().substr(2)},n.a=function(e){return e.getHours()<12?"am":"pm"},n.A=function(e){return e.getHours()<12?"AM":"PM"},n.B=function(e){var t,n=e.getUTCHours();return n=23===n?0:n+1,t=Math.abs((60*(60*n+e.getUTCMinutes())+e.getUTCSeconds())/86.4).toFixed(0),"000".concat(t).slice(t.length)},n.g=function(e){var t=e.getHours();return 0===t?12:t>12?t-12:t},n.G=function(e){return e.getHours()},n.h=function(e){var t=e.getHours();return(10>t||t>12&&22>t?"0":"")+(12>t?t:t-12)},n.H=function(e){var t=e.getHours();return(10>t?"0":"")+t},n.i=function(e){var t=e.getMinutes();return(10>t?"0":"")+t},n.s=function(e){var t=e.getSeconds();return(10>t?"0":"")+t},n.O=function(e){var t=e.getTimezoneOffset();return(0>t?"-":"+")+(10>t/60?"0":"")+Math.abs(t/60)+"00"},n.Z=function(e){return 60*e.getTimezoneOffset()},n.c=function(e){return e.toISOString()},n.r=function(e){return e.toUTCString()},n.U=function(e){return e.getTime()/1e3}},{"./utils":23}],3:[function(e,t,n){var r=e("./utils"),o=e("./dateformatter");n.addslashes=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.addslashes(t)}),e):e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},n.capitalize=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.capitalize(t)}),e):e.toString().charAt(0).toUpperCase()+e.toString().substr(1).toLowerCase()},n.date=function(e,t,n,r){var i,s=t.length,a=new o.DateZ(e),u=0,c="";for(n&&a.setTimezoneOffset(n,r),u;s>u;u+=1)i=t.charAt(u),c+=o.hasOwnProperty(i)?o[i](a,n,r):i;return c},n.default=function(e,t){return"undefined"==typeof e||!e&&"number"!=typeof e?t:e},n.escape=function(e,t){if("object"==typeof e)return r.each(e,function(t,r){e[r]=n.escape(t)}),e;if("string"!=typeof e)return e;var o,i=0,s="";switch(t){case"js":for(e=e.replace(/\\/g,"\\u005C"),i;i<e.length;i+=1)o=e.charCodeAt(i),32>o?(o=o.toString(16).toUpperCase(),o=o.length<2?"0"+o:o,s+="\\u00"+o):s+=e[i];return s.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B");default:return e.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},n.e=n.escape,n.first=function(e){if("object"==typeof e&&!r.isArray(e)){var t=r.keys(e);return e[t[0]]}return"string"==typeof e?e.substr(0,1):e[0]},n.join=function(e,t){if(r.isArray(e))return e.join(t);if("object"==typeof e){var n=[];return r.each(e,function(e){n.push(e)}),n.join(t)}return e},n.json=function(e,t){return JSON.stringify(e,null,t||0)},n.json_encode=n.json,n.last=function(e){if("object"==typeof e&&!r.isArray(e)){var t=r.keys(e);return e[t[t.length-1]]}return"string"==typeof e?e.charAt(e.length-1):e[e.length-1]},n.lower=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.lower(t)}),e):e.toString().toLowerCase()},n.raw=function(e){return n.safe(e)},n.raw.safe=!0,n.replace=function(e,t,n,r){var o=new RegExp(t,r);return e.replace(o,n)},n.reverse=function(e){return n.sort(e,!0)},n.safe=function(e){return e},n.safe.safe=!0,n.sort=function(e,t){var n;if(r.isArray(e))n=e.sort();else switch(typeof e){case"object":n=r.keys(e).sort();break;case"string":return n=e.split(""),t?n.reverse().join(""):n.sort().join("")}return n&&t?n.reverse():n||e},n.striptags=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.striptags(t)}),e):e.toString().replace(/(<([^>]+)>)/gi,"")},n.title=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.title(t)}),e):e.toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},n.uniq=function(e){var t;return e&&r.isArray(e)?(t=[],r.each(e,function(e){-1===t.indexOf(e)&&t.push(e)}),t):""},n.upper=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.upper(t)}),e):e.toString().toUpperCase()},n.url_encode=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.url_encode(t)}),e):encodeURIComponent(e)},n.url_decode=function(e){return"object"==typeof e?(r.each(e,function(t,r){e[r]=n.url_decode(t)}),e):decodeURIComponent(e)}},{"./dateformatter":2,"./utils":23}],4:[function(e,t,n){function r(e){var t;return o.some(s,function(n){return o.some(n.regex,function(r){var o,i=e.match(r);if(i)return o=i[n.idx||0].replace(/\s*$/,""),o=n.hasOwnProperty("replace")&&n.replace.hasOwnProperty(o)?n.replace[o]:o,t={match:o,type:n.type,length:i[0].length},!0})}),t||(t={match:e,type:i.UNKNOWN,length:e.length}),t}var o=e("./utils"),i={WHITESPACE:0,STRING:1,FILTER:2,FILTEREMPTY:3,FUNCTION:4,FUNCTIONEMPTY:5,PARENOPEN:6,PARENCLOSE:7,COMMA:8,VAR:9,NUMBER:10,OPERATOR:11,BRACKETOPEN:12,BRACKETCLOSE:13,DOTKEY:14,ARRAYOPEN:15,CURLYOPEN:17,CURLYCLOSE:18,COLON:19,COMPARATOR:20,LOGIC:21,NOT:22,BOOL:23,ASSIGNMENT:24,METHODOPEN:25,UNKNOWN:100},s=[{type:i.WHITESPACE,regex:[/^\s+/]},{type:i.STRING,regex:[/^""/,/^".*?[^\\]"/,/^''/,/^'.*?[^\\]'/]},{type:i.FILTER,regex:[/^\|\s*(\w+)\(/],idx:1},{type:i.FILTEREMPTY,regex:[/^\|\s*(\w+)/],idx:1},{type:i.FUNCTIONEMPTY,regex:[/^\s*(\w+)\(\)/],idx:1},{type:i.FUNCTION,regex:[/^\s*(\w+)\(/],idx:1},{type:i.PARENOPEN,regex:[/^\(/]},{type:i.PARENCLOSE,regex:[/^\)/]},{type:i.COMMA,regex:[/^,/]},{type:i.LOGIC,regex:[/^(&&|\|\||and|or)\s*/],idx:1,replace:{and:"&&",or:"||"}},{type:i.COMPARATOR,regex:[/^(===|==|\!==|\!=|<=|<|>=|>|in\s|gte\s|gt\s|lte\s|lt\s)\s*/],idx:1,replace:{gte:">=",gt:">",lte:"<=",lt:"<"}},{type:i.ASSIGNMENT,regex:[/^(=|\+=|-=|\*=|\/=)/]},{type:i.NOT,regex:[/^(not|\!)\s*/],idx:1,replace:{not:"!"}},{type:i.BOOL,regex:[/^(true|false)/]},{type:i.VAR,regex:[/^[a-zA-Z_$]\w*((\.\w*)+)?/,/^[a-zA-Z_$]\w*/]},{type:i.BRACKETOPEN,regex:[/^\[/]},{type:i.BRACKETCLOSE,regex:[/^\]/]},{type:i.CURLYOPEN,regex:[/^\{/]},{type:i.COLON,regex:[/^\:/]},{type:i.CURLYCLOSE,regex:[/^\}/]},{type:i.DOTKEY,regex:[/^\.(\w+)/],idx:1},{type:i.NUMBER,regex:[/^[+\-]?\d+(\.\d+)?/]},{type:i.OPERATOR,regex:[/^(\+|\-|\/|\*|%)/]}];n.types=i,n.read=function(e){for(var t,n,o=0,i=[];o<e.length;)t=e.substring(o),n=r(t),o+=n.length,i.push(n);return i}},{"./utils":23}],5:[function(e,t,n){function r(e){return e.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function o(e,t,n,r,o){this.out=[],this.state=[],this.filterApplyIdx=[],this._parsers={},this.line=r,this.filename=o,this.filters=t,this.escape=n,this.parse=function(){var t=this;return t._parsers.start&&t._parsers.start.call(t),i.each(e,function(n,r){var o=e[r-1];if(t.isLast=r===e.length-1,o)for(;o.type===a.WHITESPACE;)r-=1,o=e[r-1];t.prevToken=o,t.parseToken(n)}),t._parsers.end&&t._parsers.end.call(t),t.escape&&(t.filterApplyIdx=[0],"string"==typeof t.escape?(t.parseToken({type:a.FILTER,match:"e"}),t.parseToken({type:a.COMMA,match:","}),t.parseToken({type:a.STRING,match:String(n)}),t.parseToken({type:a.PARENCLOSE,match:")"})):t.parseToken({type:a.FILTEREMPTY,match:"e"})),t.out}}var i=e("./utils"),s=e("./lexer"),a=s.types,u=["break","case","catch","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with"];o.prototype={on:function(e,t){this._parsers[e]=t},parseToken:function(e){var t,n=this,r=n._parsers[e.type]||n._parsers["*"],o=e.match,s=n.prevToken,u=n.state.length?n.state[n.state.length-1]:null;if(!r||"function"!=typeof r||r.call(this,e))switch(u&&s&&u===a.FILTER&&s.type===a.FILTER&&e.type!==a.PARENCLOSE&&e.type!==a.COMMA&&e.type!==a.OPERATOR&&e.type!==a.FILTER&&e.type!==a.FILTEREMPTY&&n.out.push(", "),u&&u===a.METHODOPEN&&(n.state.pop(),e.type!==a.PARENCLOSE&&n.out.push(", ")),e.type){case a.WHITESPACE:break;case a.STRING:n.filterApplyIdx.push(n.out.length),n.out.push(o.replace(/\\/g,"\\\\"));break;case a.NUMBER:n.filterApplyIdx.push(n.out.length),n.out.push(o);break;case a.FILTER:n.filters.hasOwnProperty(o)&&"function"==typeof n.filters[o]||i.throwError('Invalid filter "'+o+'"',n.line,n.filename),n.escape=n.filters[o].safe?!1:n.escape,t=n.filterApplyIdx.pop(),n.out.splice(t,0,'_filters["'+o+'"]('),n.state.push(e.type),n.filterApplyIdx.push(t);break;case a.FILTEREMPTY:n.filters.hasOwnProperty(o)&&"function"==typeof n.filters[o]||i.throwError('Invalid filter "'+o+'"',n.line,n.filename),n.escape=n.filters[o].safe?!1:n.escape,n.out.splice(n.filterApplyIdx[n.filterApplyIdx.length-1],0,'_filters["'+o+'"]('),n.out.push(")");break;case a.FUNCTION:case a.FUNCTIONEMPTY:n.out.push("((typeof "+o+' !== "undefined") ? '+o+" : ((typeof _ctx."+o+' !== "undefined") ? _ctx.'+o+" : _fn))("),n.escape=!1,e.type===a.FUNCTIONEMPTY?n.out[n.out.length-1]=n.out[n.out.length-1]+")":n.state.push(e.type),n.filterApplyIdx.push(n.out.length-1);break;case a.PARENOPEN:n.state.push(e.type),n.filterApplyIdx.length?(n.out.splice(n.filterApplyIdx[n.filterApplyIdx.length-1],0,"("),s&&s.type===a.VAR?(t=s.match.split(".").slice(0,-1),n.out.push(" || _fn).call("+n.checkMatch(t)),n.state.push(a.METHODOPEN),n.escape=!1):n.out.push(" || _fn)(")):n.out.push("("),n.filterApplyIdx.push(n.out.length-1);break;case a.PARENCLOSE:t=n.state.pop(),t!==a.PARENOPEN&&t!==a.FUNCTION&&t!==a.FILTER&&i.throwError("Mismatched nesting state",n.line,n.filename),n.out.push(")"),n.filterApplyIdx.pop();break;case a.COMMA:u!==a.FUNCTION&&u!==a.FILTER&&u!==a.ARRAYOPEN&&u!==a.CURLYOPEN&&u!==a.PARENOPEN&&i.throwError("Unexpected comma",n.line,n.filename),n.out.push(", "),n.filterApplyIdx.pop();break;case a.VAR:n.parseVar(e,o,u,s);break;case a.BRACKETOPEN:!s||s.type!==a.VAR&&s.type!==a.BRACKETCLOSE&&s.type!==a.PARENCLOSE?(n.state.push(a.ARRAYOPEN),n.filterApplyIdx.push(n.out.length)):n.state.push(e.type),n.out.push("[");break;case a.BRACKETCLOSE:t=n.state.pop(),t!==a.BRACKETOPEN&&t!==a.ARRAYOPEN&&i.throwError("Unexpected closing square bracket",n.line,n.filename),n.out.push("]"),n.filterApplyIdx.pop();break;case a.CURLYOPEN:n.state.push(e.type),n.out.push("{"),n.filterApplyIdx.push(n.out.length-1);break;case a.COLON:u!==a.CURLYOPEN&&i.throwError("Unexpected colon",n.line,n.filename),n.out.push(":"),n.filterApplyIdx.pop();break;case a.CURLYCLOSE:n.state.pop()!==a.CURLYOPEN&&i.throwError("Unexpected closing curly brace",n.line,n.filename),n.out.push("}"),n.filterApplyIdx.pop();break;case a.DOTKEY:(!s||s.type!==a.VAR&&s.type!==a.BRACKETCLOSE&&s.type!==a.DOTKEY)&&i.throwError('Unexpected key "'+o+'"',n.line,n.filename),n.out.push("."+o);break;case a.OPERATOR:n.out.push(" "+o+" "),n.filterApplyIdx.pop()}},parseVar:function(e,t,n){var r=this;return t=t.split("."),-1!==u.indexOf(t[0])&&i.throwError('Reserved keyword "'+t[0]+'" attempted to be used as a variable',r.line,r.filename),r.filterApplyIdx.push(r.out.length),n===a.CURLYOPEN?(t.length>1&&i.throwError("Unexpected dot",r.line,r.filename),r.out.push(t[0]),void 0):(r.out.push(r.checkMatch(t)),void 0)},checkMatch:function(e){function t(t){var n=t+r,o=e,s="";return s="(typeof "+n+' !== "undefined"',i.each(o,function(e,t){0!==t&&(s+=" && "+n+"."+e+" !== undefined",n+="."+e)}),s+=")"}function n(n){return"("+t(n)+" ? "+n+e.join(".")+' : "")'}var r=e[0];return"("+t("")+" ? "+n("")+" : "+n("_ctx.")+")"}},n.parse=function(e,t,u,c){function l(e,n){var r,a,u=s.read(i.strip(e));return r=new o(u,c,g,n,t.filename),a=r.parse().join(""),r.state.length&&i.throwError('Unable to parse "'+e+'"',n,t.filename),{compile:function(){return"_output += "+a+";\n"}}}function p(e,n){var r,l,p,f,h,d,m;if(i.startsWith(e,"end")){if(m=M[M.length-1],m&&m.name===e.split(/\s+/)[0].replace(/^end/,"")&&m.ends){switch(m.name){case"autoescape":g=t.autoescape;break;case"raw":D=!1}return M.pop(),void 0}D||i.throwError('Unexpected end of tag "'+e.replace(/^end/,"")+'"',n,t.filename)}if(!D){switch(p=e.split(/\s+(.+)?/),f=p.shift(),u.hasOwnProperty(f)||i.throwError('Unexpected tag "'+e+'"',n,t.filename),r=s.read(i.strip(p.join(" "))),l=new o(r,c,!1,n,t.filename),h=u[f],h.parse(p[1],n,l,a,M,t)||i.throwError('Unexpected tag "'+f+'"',n,t.filename),l.parse(),d=l.out,f){case"autoescape":g="false"!==d[0]?d[0]:!1;break;case"raw":D=!0}return{block:!!u[f].block,compile:h.compile,args:d,content:[],ends:h.ends,name:f}}}function f(e){return"string"==typeof e&&(e=e.replace(/\s*$/,"")),e}e=e.replace(/\r\n/g,"\n");var h,g=t.autoescape,d=t.tagControls[0],m=t.tagControls[1],y=t.varControls[0],w=t.varControls[1],v=r(d),E=r(m),O=r(y),x=r(w),T=new RegExp("^"+v+"-?\\s*-?|-?\\s*-?"+E+"$","g"),A=new RegExp("^"+v+"-"),C=new RegExp("-"+E+"$"),b=new RegExp("^"+O+"-?\\s*-?|-?\\s*-?"+x+"$","g"),R=new RegExp("^"+O+"-"),N=new RegExp("-"+x+"$"),k=t.cmtControls[0],U=t.cmtControls[1],I="[\\s\\S]*?",P=new RegExp("("+v+I+E+"|"+O+I+x+"|"+r(k)+I+r(U)+")"),S=1,M=[],F=null,_=[],L={},D=!1;return n.parseVariable=l,i.each(e.split(P),function(e){var t,n,r,o,s;if(e){if(!D&&i.startsWith(e,y)&&i.endsWith(e,w))r=R.test(e),h=N.test(e),t=l(e.replace(b,""),S);else if(i.startsWith(e,d)&&i.endsWith(e,m))r=A.test(e),h=C.test(e),t=p(e.replace(T,""),S),t&&("extends"===t.name&&(F=t.args.join("").replace(/^\'|\'$/g,"").replace(/^\"|\"$/g,"")),!t.block||M.length&&"block"!==t.name||(L[t.args.join("")]=t)),D&&!t&&(t=e);else if(D||!i.startsWith(e,k)&&!i.endsWith(e,U))t=h?e.replace(/^\s*/,""):e,h=!1;else if(i.startsWith(e,k)&&i.endsWith(e,U))return;r&&_.length&&(o=_.pop(),"string"==typeof o?o=f(o):o.content&&o.content.length&&(s=f(o.content.pop()),o.content.push(s)),_.push(o)),t&&(M.length?M[M.length-1].content.push(t):_.push(t),t.name&&t.ends&&M.push(t),n=e.match(/\n/g),S+=n?n.length:0)}}),{name:t.filename,parent:F,tokens:_,blocks:L}},n.compile=function(e,t,r,o){var s="",a=i.isArray(e)?e:e.tokens;return i.each(a,function(e){var i;return"string"==typeof e?(s+='_output += "'+e.replace(/\\/g,"\\\\").replace(/\n|\r/g,"\\n").replace(/"/g,'\\"')+'";\n',void 0):(i=e.compile(n.compile,e.args?e.args.slice(0):[],e.content?e.content.slice(0):[],t,r,o),s+=i||"",void 0)}),s}},{"./lexer":4,"./utils":23}],6:[function(e,t,n){function r(){return""}function o(e){if(e&&(a.each(["varControls","tagControls","cmtControls"],function(t){if(e.hasOwnProperty(t)){if(!a.isArray(e[t])||2!==e[t].length)throw new Error('Option "'+t+'" must be an array containing 2 different control strings.');if(e[t][0]===e[t][1])throw new Error('Option "'+t+'" open and close controls must not be the same.');a.each(e[t],function(e,n){if(e.length<2)throw new Error('Option "'+t+'" '+(n?"open ":"close ")+'control must be at least 2 characters. Saw "'+e+'" instead.')})}}),e.hasOwnProperty("cache")&&e.cache&&"memory"!==e.cache&&(!e.cache.get||!e.cache.set)))throw new Error("Invalid cache option "+JSON.stringify(e.cache)+' found. Expected "memory" or { get: function (key) { ... }, set: function (key, value) { ... } }.')}var i=e("fs"),s=e("path"),a=e("./utils"),u=e("./tags"),c=e("./filters"),l=e("./parser"),p=e("./dateformatter");n.version="1.0.0-rc2";var f,h={autoescape:!0,varControls:["{{","}}"],tagControls:["{%","%}"],cmtControls:["{#","#}"],locals:{},cache:"memory"};n.setDefaults=function(e){o(e);var t=a.extend({},h.locals,e.locals||{});a.extend(h,e),h.locals=t,f.options=a.extend(f.options,e)},n.setDefaultTZOffset=function(e){p.tzOffset=e},n.Swig=function(e){function t(e){return e&&e.locals?a.extend({},y.options.locals,e.locals):y.options.locals}function p(e){return y.options.cache?"memory"===y.options.cache?y.cache[e]:y.options.cache.get(e):void 0}function f(e,t){return y.options.cache?"memory"===y.options.cache?(y.cache[e]=t,void 0):(y.options.cache.set(e,t),void 0):void 0}function g(e,t){return a.map(t,function(t){var n=t.args?t.args.join(""):"";return"block"===t.name&&e[n]&&(t=e[n]),t.content&&t.content.length&&(t.content=g(e,t.content)),t})}function d(e,t){a.each(e,function(e){"block"!==e.name&&t.unshift(e)})}function m(e,t){for(var n,r,o,i=e.parent,u=[],c=[];i;){if(!t||!t.filename)throw new Error('Cannot extend "'+i+'" because current template has no filename.');if(n=n||t.filename,n=s.resolve(s.dirname(n),i),r=y.parseFile(n,a.extend({},t,{filename:n})),i=r.parent,-1!==u.indexOf(n))throw new Error('Illegal circular extends of "'+n+'".');u.push(n),c.push(r)}for(o=c.length,o=c.length-2;o>=0;o-=1)c[o].tokens=g(c[o].blocks,c[o+1].tokens),d(c[o].blocks,c[o].tokens);return c}o(e),this.options=a.extend({},h,e||{}),this.cache={},this.extensions={};var y=this,w=u,v=c;this.invalidateCache=function(){"memory"===y.options.cache&&(y.cache={})},this.setFilter=function(e,t){if("function"!=typeof t)throw new Error('Filter "'+e+'" is not a valid function.');v[e]=t},this.setTag=function(e,t,n,r,o){if("function"!=typeof t)throw new Error('Tag "'+e+'" parse method is not a valid function.');if("function"!=typeof n)throw new Error('Tag "'+e+'" compile method is not a valid function.');w[e]={parse:t,compile:n,ends:r||!1,block:!!o}},this.setExtension=function(e,t){y.extensions[e]=t},this.parse=function(e,n){o(n);var r,i=t(n),s={};for(r in n)n.hasOwnProperty(r)&&"locals"!==r&&(s[r]=n[r]);return n=a.extend({},y.options,s),n.locals=i,l.parse(e,n,w,v)},this.parseFile=function(e,t){var n;if(t||(t={}),e=t.resolveFrom?s.resolve(s.dirname(t.resolveFrom),e):e,!i||!i.readFileSync)throw new Error("Unable to find file "+e+" because there is no filesystem to read from.");return n=i.readFileSync(e,"utf8"),t.filename||(t=a.extend({filename:e},t)),y.parse(n,t)},this.precompile=function(e,t){var n,r=y.parse(e,t),o=m(r,t);return o.length&&(r.tokens=g(r.blocks,o[0].tokens),d(r.blocks,r.tokens)),n=new Function("_swig","_ctx","_filters","_utils","_fn",'  var _ext = _swig.extensions,\n    _output = "";\n'+l.compile(r,o,t)+"\n"+"  return _output;\n"),{tpl:n,tokens:r}},this.render=function(e,t){return n.compile(e,t)()},this.renderFile=function(e,t,r){return r?(n.compileFile(e,{},function(e,n){return e?(r(e),void 0):(r(null,n(t)),void 0)}),void 0):n.compileFile(e)(t)},this.compile=function(e,n){function o(e){var t;return t=e&&s?a.extend({},i,e):e&&!s?e:!e&&s?i:{},u.tpl(y,t,v,a,r)}var i,s,u,c=n?n.filename:null,l=c?p(c):null;return l?l:(i=t(n),s=a.keys(i).length,u=this.precompile(e,n),a.extend(o,u.tokens),c&&f(c,o),o)},this.compileFile=function(e,t,n){var r,o;if(t||(t={}),e=t.resolveFrom?s.resolve(s.dirname(t.resolveFrom),e):e,t.filename||(t=a.extend({filename:e},t)),o=p(e))return n?(n(null,o),void 0):o;if(!i||!i.readFileSync)throw new Error("Unable to find file "+e+" because there is no filesystem to read from.");return n?(i.readFile(e,"utf8",function(e,r){return e?(n(e),void 0):(n(e,y.compile(r,t)),void 0)}),void 0):(r=i.readFileSync(e,"utf8"),y.compile(r,t))},this.run=function(e,n){var o=t({locals:n});return e(y,o,v,a,r)}},f=new n.Swig,n.setFilter=f.setFilter,n.setTag=f.setTag,n.setExtension=f.setExtension,n.parseFile=f.parseFile,n.precompile=f.precompile,n.compile=f.compile,n.compileFile=f.compileFile,n.render=f.render,n.renderFile=f.renderFile,n.run=f.run,n.invalidateCache=f.invalidateCache},{"./dateformatter":2,"./filters":3,"./parser":5,"./tags":7,"./utils":23,fs:24,path:25}],7:[function(e,t,n){n.autoescape=e("./tags/autoescape"),n.block=e("./tags/block"),n.else=e("./tags/else"),n.elseif=e("./tags/elseif"),n.elif=n.elseif,n.extends=e("./tags/extends"),n.filter=e("./tags/filter"),n.for=e("./tags/for"),n.if=e("./tags/if"),n.import=e("./tags/import"),n.include=e("./tags/include"),n.macro=e("./tags/macro"),n.parent=e("./tags/parent"),n.raw=e("./tags/raw"),n.set=e("./tags/set"),n.spaceless=e("./tags/spaceless")},{"./tags/autoescape":8,"./tags/block":9,"./tags/else":10,"./tags/elseif":11,"./tags/extends":12,"./tags/filter":13,"./tags/for":14,"./tags/if":15,"./tags/import":16,"./tags/include":17,"./tags/macro":18,"./tags/parent":19,"./tags/raw":20,"./tags/set":21,"./tags/spaceless":22}],8:[function(e,t,n){var r=e("../utils"),o=["html","js"];n.compile=function(e,t,n){return e(n)},n.parse=function(e,t,n,i,s,a){var u;return n.on("*",function(e){return e.type!==i.WHITESPACE?u||e.type!==i.BOOL&&(e.type!==i.STRING||-1!==o.indexOf(e.match))?(r.throwError('Unexpected token "'+e.match+'" in autoescape tag',t,a.filename),void 0):(this.out.push(e.match),u=!0,void 0):void 0}),!0},n.ends=!0},{"../utils":23}],9:[function(e,t,n){n.compile=function(e,t,n,r,o){return e(n,r,o,t.join(""))},n.parse=function(e,t,n){return n.on("*",function(e){this.out.push(e.match)}),!0},n.ends=!0,n.block=!0},{}],10:[function(e,t,n){n.compile=function(){return"} else {\n"},n.parse=function(e,t,n,r,o){return n.on("*",function(e){throw new Error('"else" tag does not accept any tokens. Found "'+e.match+'" on line '+t+".")}),o.length&&"if"===o[o.length-1].name}},{}],11:[function(e,t,n){var r=e("./if").parse;n.compile=function(e,t){return"} else if ("+t.join(" ")+") {\n"},n.parse=function(e,t,n,o,i){var s=r(e,t,n,o,i);return s&&i.length&&"if"===i[i.length-1].name}},{"./if":15}],12:[function(e,t,n){n.compile=function(){},n.parse=function(){return!0},n.ends=!1},{}],13:[function(e,t,n){var r=e("../filters");n.compile=function(e,t,n,r,o){var i=t.shift().replace(/\($/,""),s='(function () {\n  var _output = "";\n'+e(n,r,o)+"  return _output;\n"+"})()";return")"===t[t.length-1]&&t.pop(),t=t.length?", "+t.join(""):"",'_output += _filters["'+i+'"]('+s+t+");\n"},n.parse=function(e,t,n,o){function i(e){if(!r.hasOwnProperty(e))throw new Error('Filter "'+e+'" does not exist on line '+t+".")}var s;return n.on(o.FUNCTION,function(e){return s?!0:(s=e.match.replace(/\($/,""),i(s),this.out.push(e.match),this.state.push(e.type),void 0)}),n.on(o.VAR,function(e){return s?!0:(s=e.match,i(s),this.out.push(s),void 0)}),!0},n.ends=!0},{"../filters":3}],14:[function(e,t,n){n.compile=function(e,t,n){var r,o=t.shift(),i="__k";return t[0]&&","===t[0]&&(t.shift(),i=o,o=t.shift()),r=t.join(""),["(function () {\n","  var __l = "+r+";\n","  if (!__l) { return; }\n","  var loop = { first: false, index: 1, index0: 0, revindex: __l.length, revindex0: __l.length - 1, length: __l.length, last: false };\n","  _utils.each(__l, function ("+o+", "+i+") {\n","    loop.key = "+i+";\n","    loop.first = (loop.index0 === 0);\n","    loop.last = (loop.revindex0 === 0);\n","    "+e(n),"    loop.index += 1; loop.index0 += 1; loop.revindex -= 1; loop.revindex0 -= 1;\n","  });\n","})();\n"].join("")},n.parse=function(e,t,n,r){var o,i;return n.on(r.NUMBER,function(e){var n=this.state.length?this.state[this.state.length-1]:null;if(!i||n!==r.ARRAYOPEN&&n!==r.CURLYOPEN&&n!==r.CURLYCLOSE&&n!==r.FUNCTION&&n!==r.FILTER)throw new Error('Unexpected number "'+e.match+'" on line '+t+".");return!0}),n.on(r.VAR,function(e){return i&&o?!0:(this.out.length||(o=!0),this.out.push(e.match),void 0)}),n.on(r.COMMA,function(e){return o&&this.prevToken.type===r.VAR?(this.out.push(e.match),void 0):!0}),n.on(r.COMPARATOR,function(e){if("in"!==e.match||!o)throw new Error('Unexpected token "'+e.match+'" on line '+t+".");i=!0}),!0},n.ends=!0},{}],15:[function(e,t,n){n.compile=function(e,t,n){return"if ("+t.join(" ")+") { \n"+e(n)+"\n"+"}"},n.parse=function(e,t,n,r){return n.on(r.COMPARATOR,function(e){if(this.isLast)throw new Error('Unexpected logic "'+e.match+'" on line '+t+".");if(this.prevToken.type===r.NOT)throw new Error('Attempted logic "not '+e.match+'" on line '+t+". Use !(foo "+e.match+") instead.");this.out.push(e.match)}),n.on(r.NOT,function(e){if(this.isLast)throw new Error('Unexpected logic "'+e.match+'" on line '+t+".");this.out.push(e.match)}),n.on(r.BOOL,function(e){this.out.push(e.match)}),n.on(r.LOGIC,function(e){if(!this.out.length||this.isLast)throw new Error('Unexpected logic "'+e.match+'" on line '+t+".");this.out.push(e.match),this.filterApplyIdx.pop()}),!0},n.ends=!0},{}],16:[function(e,t,n){var r=e("../utils");n.compile=function(e,t){var n=t.pop(),r="var "+n+" = {};\n"+"(function (exports) {\n"+'  var _output = "";\n';return r+=t.join(""),r+="}("+n+"));\n"},n.parse=function(t,n,o,i,s,a){var u,c,l=e("../swig").parseFile,p=e("../parser").compile,f={resolveFrom:a.filename},h=r.extend({},a,f);return o.on(i.STRING,function(e){var t=this;if(!u)return u=l(e.match.replace(/^("|')|("|')$/g,""),f).tokens,r.each(u,function(e){var n,r="";e&&"macro"===e.name&&e.compile&&(n=e.args[0],r+=e.compile(p,e.args,e.content,[],h)+"\n",r+="exports."+n+" = "+n+";\n",t.out.push(r))}),void 0;throw new Error("Unexpected string "+e.match+" on line "+n+".")}),o.on(i.VAR,function(e){var t=this;if(!u||c)throw new Error('Unexpected variable "'+e.match+'" on line '+n+".");if("as"!==e.match)return c=e.match,t.out.push(c),!1}),!0},n.block=!0},{"../parser":5,"../swig":6,"../utils":23}],17:[function(e,t,n){var r="ignore",o="missing",i="only";n.compile=function(e,t){var n=t.shift(),r=t.indexOf(i),s=-1!==r?t.splice(r,1):!1,a=t.pop().replace(/\\/g,"\\\\"),u=t[t.length-1]===o?t.pop():!1,c=t.join("");return(u?"  try {\n":"")+"_output += _swig.compileFile("+n+", {"+'resolveFrom: "'+a+'"'+"})("+(s&&c?c:c?"_utils.extend({}, _ctx, "+c+")":"_ctx")+");\n"+(u?"} catch (e) {}\n":"")},n.parse=function(e,t,n,s,a,u){var c,l;return n.on(s.STRING,function(e){return c?!0:(c=e.match,this.out.push(c),void 0)}),n.on(s.VAR,function(e){if(!c)return c=e.match,!0;if(!l&&"with"===e.match)return l=!0,void 0;if(l&&e.match===i&&"with"!==this.prevToken.match)return this.out.push(e.match),void 0;if(e.match===r)return!1;if(e.match===o){if(this.prevToken.match!==r)throw new Error('Unexpected token "'+o+'" on line '+t+".");return this.out.push(e.match),!1}if(this.prevToken.match===r)throw new Error('Expected "'+o+'" on line '+t+' but found "'+e.match+'".');return!0}),n.on("end",function(){this.out.push(u.filename||null)}),!0}},{}],18:[function(e,t,n){n.compile=function(e,t,n,r,o,i){var s=t.shift();return"function "+s+"("+t.join("")+") {\n"+'  var _output = "";\n'+e(n,r,o,i)+"\n"+"  return _output;\n"+"};\n"+s+".safe = true;\n"},n.parse=function(e,t,n,r){var o;return n.on(r.VAR,function(e){if(-1!==e.match.indexOf("."))throw new Error('Unexpected dot in macro argument "'+e.match+'" on line '+t+".");this.out.push(e.match)}),n.on(r.FUNCTION,function(e){o||(o=e.match,this.out.push(o),this.state.push(r.FUNCTION))}),n.on(r.FUNCTIONEMPTY,function(e){o||(o=e.match,this.out.push(o))}),n.on(r.PARENCLOSE,function(){if(!this.isLast)throw new Error("Unexpected parenthesis close on line "+t+".")}),n.on(r.COMMA,function(){return!0}),n.on("*",function(){}),!0},n.ends=!0,n.block=!0},{}],19:[function(e,t,n){n.compile=function(e,t,n,r,o,i){if(!r||!r.length)return"";var s,a,u=(t[0],!0),c=r.length,l=0;for(l;c>l;l+=1)if(s=r[l],s.blocks&&s.blocks.hasOwnProperty(i)&&u)return a=s.blocks[i],a.compile(e,[i],a.content,r.slice(l+1),o)+"\n"},n.parse=function(e,t,n,r,o,i){return n.on("*",function(e){throw new Error('Unexpected argument "'+e.match+'" on line '+t+".")}),n.on("end",function(){this.out.push(i.filename)}),!0}},{}],20:[function(e,t,n){n.compile=function(e,t,n){return e(n)},n.parse=function(e,t,n){return n.on("*",function(e){throw new Error('Unexpected token "'+e.match+'" in raw tag on line '+t+".")}),!0},n.ends=!0},{}],21:[function(e,t,n){n.compile=function(e,t){return t.join(" ")+";\n"},n.parse=function(e,t,n,r){var o;return n.on(r.VAR,function(e){return this.out.length?!0:(o=e.match,this.out.push("_ctx."+o),void 0)}),n.on(r.ASSIGNMENT,function(e){if(1!==this.out.length||!o)throw new Error('Unexpected assignment "'+e.match+'" on line '+t+".");this.out.push(e.match)}),!0},n.block=!0},{}],22:[function(e,t,n){var r=e("../utils");n.compile=function(e,t,n,o,i){function s(e){return r.map(e,function(e){return e.content?(e.content=s(e.content),e):e.replace(/^\s+/,"").replace(/>\s+</g,"><").replace(/\s+$/,"")})}return e(s(n),o,i)},n.parse=function(e,t,n){return n.on("*",function(e){throw new Error('Unexpected token "'+e.match+'" on line '+t+".")}),!0},n.ends=!0},{"../utils":23}],23:[function(e,t,n){var r;n.strip=function(e){return e.replace(/^\s+|\s+$/g,"")},n.startsWith=function(e,t){return 0===e.indexOf(t)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.each=function(e,t){var n,o;if(r(e))for(n=0,o=e.length,n;o>n&&t(e[n],n,e)!==!1;n+=1);else for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n,e)===!1)break;return e},n.isArray=r=Array.hasOwnProperty("isArray")?Array.isArray:function(e){return e?"object"==typeof e&&-1!==Object.prototype.toString.call(e).indexOf():!1},n.some=function(e,t){var o,i,s=0;if(r(e))for(i=e.length,s;i>s&&!(o=t(e[s],s,e));s+=1);else n.each(e,function(n,r){return o=t(n,r,e),!o});return!!o},n.map=function(e,t){var n,o=0,i=[];if(r(e))for(n=e.length,o;n>o;o+=1)i[o]=t(e[o],o);else for(o in e)e.hasOwnProperty(o)&&(i[o]=t(e[o],o));return i},n.extend=function(){var e,t,n=arguments,r=n[0],o=n.length>1?Array.prototype.slice.call(n,1):[],i=0,s=o.length;for(i;s>i;i+=1){t=o[i]||{};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e])}return r},n.keys=function(e){return Object.keys?Object.keys(e):n.map(e,function(e,t){return t})},n.throwError=function(e,t,n){throw t&&(e+=" on line "+t),n&&(e+=" in file "+n),new Error(e+".")
}},{}],24:[function(){},{}],25:[function(e,t,n){function r(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function o(e,t){for(var n=0,r=e.length;r>=0;r--){var o=e[r];"."==o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var i=e("__browserify_process"),s=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){for(var e="",t=!1,n=arguments.length;n>=-1&&!t;n--){var s=n>=0?arguments[n]:i.cwd();"string"==typeof s&&s&&(e=s+"/"+e,t="/"===s.charAt(0))}return e=o(r(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t="/"===e.charAt(0),n="/"===e.slice(-1);return e=o(r(e.split("/"),function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){return e&&"string"==typeof e}).join("/"))},n.dirname=function(e){var t=s.exec(e)[1]||"",n=!1;return t?1===t.length||n&&t.length<=3&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=s.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return s.exec(e)[3]||""},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),s=Math.min(o.length,i.length),a=s,u=0;s>u;u++)if(o[u]!==i[u]){a=u;break}for(var c=[],u=a;u<o.length;u++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},n.sep="/"},{__browserify_process:26}],26:[function(e,t){var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var t=n.shift();t()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[1]);
//# sourceMappingURL=dist/swig.js.map